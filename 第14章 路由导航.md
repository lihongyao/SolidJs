# 概述

[Solid Router ↪](https://docs.solidjs.com/solid-router/) 使 Solid 应用程序中的路由操作更加简便，有助于开发者通过使用 JSX 或通过属性传递的对象来定义路由，从而实现导航和渲染的管理。

# 安装依赖

```shell
$ pnpm i @solidjs/router
```

# 配置路由

> **`@/routes/index.tsx`**

```tsx
import { lazy } from "solid-js";
import { Router, Route, Navigate } from "@solidjs/router";

// -- 导入页面组件
import Layout from "@/Layout";
import Login from "@/pages/Login";
import Home from "@/pages/Home";
import Users from "@/pages/Users";
import NotFound from "@/pages/NotFound";

// -- 路由懒加载
const Profile = lazy(() => import("@/pages/Profile"));
const Details = lazy(() => import("@/pages/Details"));
const Learn = lazy(() => import("@/pages/Learn"));
const LearnDetails = lazy(() => import("@/pages/LearnDetails"));

export default function AppRouter() {
  return (
    <Router>
      {/* 根路径重定向 */}
      <Route path="/" component={() => <Navigate href="/login" />} />
      <Route path="/login" component={Login} />

      {/* 动态路由，? 表示可选 */}
      <Route path="/details/:id/:q?" component={Details} />

      {/* 共享布局的路由组 */}
      <Route component={Layout}>
        <Route path="/home" component={Home} />
        <Route path="/users" component={Users} />
        <Route path="/profile" component={Profile} />
      </Route>

      {/* 嵌套路由 */}
      <Route path="/learn">
        <Route path="/" component={Learn} />
        <Route path="/details" component={LearnDetails} />
      </Route>

      {/* 通配符 */}
      <Route path="*paramName" component={NotFound} />
    </Router>
  );
}

```

# 导入路由

> **`@/index.tsx`**

```tsx
/* @refresh reload */
import "./index.css";
import { render } from "solid-js/web";
import AppRouter from "./routes";

render(() => <AppRouter />, document.getElementById("root")!);
```

# 公共路由

> **`@/Layout.tsx`**

```tsx
import { A } from "@solidjs/router";
import { RouteSectionProps } from "@solidjs/router";

export default function Layout(props: RouteSectionProps) {
  return (
    <div>
      {/* 导航 */}
      <nav>
        <A href="/home">Home</A>
        <A href="/users">Users</A>
        <A href="/profile">Profile</A>
        <A href="/details/1">Details</A>
      </nav>
      {/* 接收子路由，类似于 React Router 中的 <outlet> */}
      {props.children}
    </div>
  );
}
```

# 配置文件

Solid Router 支持基于配置的路由，如下所示：

> **`@routes/index.tsx`**

```tsx
import { lazy, type Component } from "solid-js";
import { Navigate, type RouteDefinition } from "@solidjs/router";

// -- 导入页面组件
import Layout from "@/Layout";
import Login from "@/pages/Login";
import Home from "@/pages/Home";
import Users from "@/pages/Users";
import NotFound from "@/pages/NotFound";

export interface AppRouteDefinition extends RouteDefinition {
  path?: string;
  component?: Component;
  children?: AppRouteDefinition[];
  meta?: {
    title?: string;
    requiresAuth?: boolean;
  };
}

const redirect = (to: string) => () => <Navigate href={to} />;
const routes: AppRouteDefinition[] = [
  // 根路径重定向
  { path: "/", component: redirect("/login") },
  { path: "/login", component: Login },

  // 动态路由，? 表示可选
  { path: "/details/:id/:q?", component: lazy(() => import("@/pages/Details")) },

  // 共享布局的路由组
  {
    component: Layout,
    children: [
      { path: "/home", component: Home },
      { path: "/users", component: Users },
      { path: "/profile", component: lazy(() => import("@/pages/Profile")) },
    ],
  },

  // 嵌套路由
  {
    path: "/learn",
    children: [
      { path: "/", component: lazy(() => import("@/pages/Learn")) },
      { path: "/details", component: lazy(() => import("@/pages/LearnDetails")) },
    ],
  },

  // 通配符
  { path: "*paramName", component: NotFound },
];

export default routes;
```

> **`@/index.tsx`**

```tsx
/* @refresh reload */
import "./index.css";
import { render } from "solid-js/web";
import { Router } from "@solidjs/router";
import routes from "./routes";

render(() => <Router>{routes}</Router>, document.getElementById("root")!);
```

# 读取路径参数

```tsx
import { useParams } from "@solidjs/router";

export default function Details() {
  const params = useParams();
  return <div>Course ID: {params.id}</div>;  { /* Course: User ID: 123 */ }
}
```

# 读取查询参数

```tsx
import { useSearchParams } from "@solidjs/router";

export default function LearnDetails() {
  const [searchParams, setSearchParams] = useSearchParams();
  return (
    <div>
      <p>Course ID: {searchParams.id}</p>
      <input
        onChange={(e) => {
          e.preventDefault();
          setSearchParams({ q: e.target.value });
        }}
      />
    </div>
  );
}
```
