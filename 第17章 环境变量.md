# 概述

Solid 基于 Vite 构建，后者提供了便捷的环境变量处理方式。

# 公共变量

公共变量（以 `VITE_`为前缀）被视为可安全暴露给客户端代码，这些变量会在编译期间被注入到客户端代码中。

在项目根目录下创建 `.env`文件，该文件将以 `键 = 值` 的格式存储环境变量。

若使用 TypeScript，可通过在项目根目录创建 `env.d.ts`文件来实现环境变量的类型安全，并启用 TypeScript 语言服务提供程序（LSP）的自动补全功能。

```ts
interface ImportMetaEnv {
  readonly VITE_USER_ID: string;
  readonly VITE_PUBLIC_ENDPOINT: string;
}

interface ImportMeta {
  readonly env: ImportMetaEnv;
}
```

访问环境变量：
```ts
import.meta.env.VITE_PUBLIC_ENDPOINT
```

> 📖 **提示**
>
> 为防止环境变量意外暴露给客户端，仅会暴露以 `VITE_`为前缀的变量。
>
> 例如：
>
> ```
> VITE_SECRET_KEY = 123hello
> DB_PASSWORD = foobar
> ```
>
> 只有 `VITE_SECRET_KEY` 会被暴露在客户端源代码中，而  `DB_PASSWORD` 则不会，如下所示。

# 私有变量

私有变量应仅在后端代码中访问，因此最好不要为其添加  `VITE_` 前缀。而应通过 `process.env` 来访问它们。根据所选的 Nitro 预设 配置，这些变量会自动生效，或需要借助外部依赖（如 `dotenv`）来实现。

```tsx
DB_HOST="somedb://192.110.0"
DB_PASSWORD = super_secret_password_hash
```

要在后端代码中访问这些变量，请使用 `process.env`。具体用法可参考以下伪代码示例：

```tsx
"use server"

const client = new DB({
  host: process.env.DB_URL,
  password: process.env.DB_PASSWORD,
});
```

同样可以通过 `env.d.ts` 文件为 `process.env` 实现类型安全。

```tsx
declare namespace NodeJS {
  interface ProcessEnv {
    readonly DB_URL: string
    readonly DB_PASSWORD: string
  }
}
```

